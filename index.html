<!DOCTYPE html>
<html lang="ja">
<head>
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-PKSZ7BSD');</script>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>FFXIV Character Card Generator</title>
  <link rel="icon" type="image/png" href="./assets/favicon.png">
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&family=Orbitron:wght@600&family=DotGothic16&family=Exo+2&family=Share+Tech&family=Permanent+Marker&family=Hachi+Maru+Pop&family=Dancing+Script&display=swap" rel="stylesheet">
  
  <link rel="stylesheet" href="./assets/css/style.css" />
</head>
<body>
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PKSZ7BSD"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <div id="loader">
    <img src="./assets/favicon.png" alt="loading..." class="spinner-icon">
    <p class="loading-text">Now Loading...</p>
  </div>

  <div id="app" style="visibility: hidden;">
    <div id="header-placeholder"></div>

    <div class="content-wrapper">
        <main class="preview-panel">
            <div class="canvas-container">
                <div class="canvas-wrapper">
                    <canvas id="background-layer"></canvas>
                    <canvas id="character-layer"></canvas>
                    <canvas id="ui-layer"></canvas>
                </div>
            </div>
        </main>

        <aside class="controls-panel">
            <div class="lang-tabs">
                <button class="lang-tab-btn active" data-lang="jp">Êó•Êú¨Ë™û</button>
                <button class="lang-tab-btn" data-lang="en">English</button>
            </div>

            <div id="controls-jp" class="controls-container">
                <div id="controls">
                    <div class="control-section">
                        <h2 class="section-title">Card Templates</h2>
                        <select id="templateSelect">
                            <option value="Gothic_black">üñ§ Gothic Black</option>
                            <option value="Gothic_white">ü§ç Gothic White</option>
                            <option value="Gothic_pink">ü©∑ Gothic Pink</option>
                            <option value="Neon_mono">üé© Neon Mono</option>
                            <option value="Neon_duotone">üçã Neon Lime</option>
                            <option value="Neon_meltdown">ü¶Ñ Neon Melt</option>
                            <option value="Water">ü´ß Aqua Flow</option>
                            <option value="Lovely_heart">üíã Lovely Heart</option>
                            <option value="Royal_garnet">ü•Ä Royal Garnet</option>
                            <option value="Royal_sapphire">üíé Royal Sapphire</option>
                        </select>
                    </div>

                    <div id="main-color-picker-section" class="control-section">
                        <h2 class="section-title">Icon BG Color</h2>
                        <div class="color-picker-wrapper">
                            <input type="color" id="iconBgColorPicker" value="#A142CD">
                            <div id="colorPresetButtons" class="color-presets">
                                <button class="preset-color-btn" data-color="#A142CD" style="background-color: #A142CD;"></button>
                                <button class="preset-color-btn" data-color="#6CD9D6" style="background-color: #6CD9D6;"></button>
                                <button class="preset-color-btn" data-color="#D34669" style="background-color: #D34669;"></button>
                                <button class="preset-color-btn" data-color="#B70016" style="background-color: #B70016;"></button>
                                <button class="preset-color-btn" data-color="#FFF500" style="background-color: #FFF500;"></button>
                                <button class="preset-color-btn" data-color="#FFFFFF" style="background-color: #FFFFFF;"></button>
                                <button class="preset-color-btn" data-color="#000000" style="background-color: #000000;"></button>
                            </div>
                        </div>
                    </div>

                    <div id="top-controls" class="control-section">
                        <label for="uploadImage" class="file-upload-label">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" x2="12" y1="3" y2="15"/></svg>
                            <span>ÁîªÂÉè„Çí„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ</span>
                        </label>
                        <input type="file" id="uploadImage" accept="image/*" class="file-upload-input">
                        <p id="fileName" class="file-name-display"></p>
                        
                        <div class="usage-notes">
                            <p class="notes-text">‚ö†Ô∏è Ëëó‰ΩúÊ®©Ë°®Ë®ò„ÅØÁîªÂÉèÂá∫ÂäõÊôÇ„Å´Ëá™Âãï„Åß‰ªò‰∏é„Åï„Çå„Åæ„Åô</p>
                        </div>
                    </div>

                    <div class="control-section">
                        <h2 class="section-title">Profile</h2>
                        <div class="grid-col-2">
                            <input type="text" id="nameInput" placeholder="Ë°®Á§∫„Åó„Åü„ÅÑ„Ç≠„É£„É©Âêç„ÇíÂÖ•Âäõ" />
                            <select id="fontSelect" required>
                                <option value="" disabled>„Ç≠„É£„É©Âêç„ÅÆ„Éï„Ç©„É≥„Éà„ÇíÈÅ∏„Å∂</option>
                                <option value="'Orbitron', sans-serif">Orbitron</option>
                                <option value="'Exo 2', sans-serif" selected>Exo 2</option>
                                <option value="'Share Tech', sans-serif">Share Tech</option>
                                <option value="'Permanent Marker', cursive">Permanent Marker</option>
                                <option value="'Hachi Maru Pop', cursive">„ÅØ„Å°„Åæ„Çã„Éù„ÉÉ„Éó</option>
                                <option value="'DotGothic16', sans-serif">„Éâ„ÉÉ„Éà„Ç¥„Ç∑„ÉÉ„ÇØ16</option>
                                <option value="'Dancing Script', cursive">Dancing Script</option>
                            </select>
                        </div>
                        <div class="grid-col-3" style="margin-top: 1rem;">
                            <select id="dcSelect" required>
                                <option value="" disabled selected>DC</option>
                                <optgroup label="JP">
                                    <option value="elemental">Elemental</option>
                                    <option value="gaia">Gaia</option>
                                    <option value="mana">Mana</option>
                                    <option value="meteor">Meteor</option>
                                </optgroup>
                                <optgroup label="NA">
                                    <option value="aether">Aether</option>
                                    <option value="primal">Primal</option>
                                    <option value="crystal">Crystal</option>
                                    <option value="dynamis">Dynamis</option>
                                </optgroup>
                                <optgroup label="EU">
                                    <option value="chaos">Chaos</option>
                                    <option value="light">Light</option>
                                </optgroup>
                                <optgroup label="OCE">
                                    <option value="materia">Materia</option>
                                </optgroup>
                            </select>
                            <select id="raceSelect" required>
                                <option value="" disabled selected>Á®ÆÊóè</option>
                                <option value="au_ra">„Ç¢„Ç¶„É©</option>
                                <option value="hrothgar">„É≠„Çπ„Ç¨„É´</option>
                                <option value="viera">„É¥„Ç£„Ç®„É©</option>
                                <option value="elezen">„Ç®„É¨„Çº„É≥</option>
                                <option value="miqote">„Éü„Ç≥„ÉÉ„ÉÜ</option>
                                <option value="hyur">„Éí„É•„Éº„É©„É≥</option>
                                <option value="roegadyn">„É´„Ç¨„Éá„Ç£„É≥</option>
                                <option value="lalafell">„É©„É©„Éï„Çß„É´</option>
                            </select>
                            <select id="progressSelect" required>
                                <option value="" disabled selected>ÈÄ≤Ë°åÂ∫¶</option>
                                <option value="shinsei">Êñ∞Áîü</option> <option value="souten">ËíºÂ§©</option> <option value="guren">Á¥ÖËìÆ</option> <option value="shikkoku">ÊºÜÈªí</option> <option value="gyougetsu">ÊöÅÊúà</option> <option value="ougon">ÈªÑÈáë</option> <option value="all_clear">ALL CLEAR</option>
                            </select>
                        </div>
                    </div>

                    <div class="control-section">
                        <h2 class="section-title">Play Style</h2>
                        <div id="styleButtons" class="button-grid">
                            <button data-value="leveling">„É¨„Éô„É™„É≥„Ç∞</button>
                            <button data-value="dd">„É¨„Ç§„Éâ</button>
                            <button data-value="pvp">PvP</button>
                            <button data-value="hunt">„É¢„Éñ„Éè„É≥</button>
                            <button data-value="map">Âú∞Âõ≥</button>
                            <button data-value="gatherer">„ÇÆ„É£„Ç∂„É©„Éº</button>
                            <button data-value="crafter">„ÇØ„É©„Éï„Çø„Éº</button>
                            <button data-value="gil">ÈáëÁ≠ñ</button>
                            <button data-value="perform">ÊºîÂ•è</button>
                            <button data-value="streaming">ÈÖç‰ø°</button>
                            <button data-value="glam">„Éü„É©„Éó„É™</button>
                            <button data-value="studio">„Çπ„Çø„Ç∏„Ç™Âà∂‰Ωú</button>
                            <button data-value="housing">„Éè„Ç¶„Ç∏„É≥„Ç∞</button>
                            <button data-value="screenshot">SSÊíÆÂΩ±</button>
                            <button data-value="drawing">„ÅäÁµµÊèè„Åç</button>
                            <button data-value="roleplay">„É≠„Éº„É´„Éó„É¨„Ç§</button>
                        </div>
                    </div>

                    <div class="control-section">
                        <h2 class="section-title">Play Time</h2>
                        <div id="playtimeOptions" class="checkbox-group">
                            </div>
                    </div>

                    <div class="control-section">
                        <h2 class="section-title">Difficulty</h2>
                        <div id="difficultyOptions" class="checkbox-group-single">
                            </div>
                    </div>
                
                    <div class="control-section">
                        <h2 class="section-title">Main Job</h2>
                        <select id="mainjobSelect" required>
                           </select>
                        <div id="subjobSection">
                            <h3 class="section-title-nested">Sub Job</h3>
                            <div class="button-grid">
                                </div>
                        </div>
                    </div>

                    <button id="downloadBtn" class="generate-btn">
                        <img src="./assets/favicon.png" alt="generate card">
                        <span>„Åì„ÅÆÂÜÖÂÆπ„Åß‰Ωú„ÇãÔºü</span>
                    </button>
                </div>
            </div>

            <div id="controls-en" class="controls-container" style="display: none;">
                <p>English controls will be here.</p>
            </div>
        </aside>
    </div>

    <div id="footer-placeholder"></div>

    <button id="toTopBtn" title="„Éà„ÉÉ„Éó„Å´Êàª„Çã">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="M12 19V5M5 12l7-7 7 7"/></svg>
    </button>
    
    <div id="saveModal" class="modal-overlay hidden">
        <div class="modal-content">
            <button id="closeModal" class="close-button">&times;</button>
            <h3>ÁîªÂÉè„ÅÆ‰øùÂ≠òÊñπÊ≥ï</h3>
            <p>ÁîªÂÉè„ÇíÈï∑Êäº„Åó„Åó„Å¶„Äå"ÂÜôÁúü"„Å´ËøΩÂä†„Äç„ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ</p>
            <img id="modalImage" src="" alt="ÁîüÊàê„Åï„Çå„Åü„Ç´„Éº„Éâ">
        </div>
    </div>

  </div>

  <div id="sticky-color-picker" class="sticky-color-picker-container is-hidden">
      </div>

  <script src="./script/common.js"></script>
  <script src="./script/main.js"></script>
</body>
</html>